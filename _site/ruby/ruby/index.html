<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>ruby &#8211; Ulysses</title>
<meta name="description" content="ruby

">
<meta name="keywords" content="erlang">


<!-- Twitter Cards -->
<meta name="twitter:title" content="ruby">
<meta name="twitter:description" content="ruby

">



<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://localhost:4000/images/site-logo.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="ruby">
<meta property="og:description" content="ruby

">
<meta property="og:url" content="http://localhost:4000/ruby/ruby/">
<meta property="og:site_name" content="Ulysses">





<link rel="canonical" href="http://localhost:4000/ruby/ruby/">
<link href="http://localhost:4000/feed.xml" type="application/atom+xml" rel="alternate" title="Ulysses Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="http://localhost:4000/assets/css/main.css">
<!-- Webfonts -->
<script src="https://use.edgefonts.net/source-sans-pro:n2,i2,n3,i3,n4,i4,n6,i6,n7,i7,n9,i9;source-code-pro:n4,n7;volkhov.js"></script>

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
  <script src="http://localhost:4000/assets/js/vendor/html5shiv.min.js"></script>
  <script src="http://localhost:4000/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="http://localhost:4000/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>


<!-- MathJax -->
<script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>


<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="http://localhost:4000/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://localhost:4000/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://localhost:4000/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://localhost:4000/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://localhost:4000/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body id="post">


<header class="masthead">
	<div class="wrap">

      <h1 class="site-title animated fadeIn"><a href="http://localhost:4000/">Ulysses</a></h1>
	</div>
</header><!-- /.masthead -->

<div class="js-menu-screen menu-screen"></div>


<div id="main" role="main">
  <article class="hentry">
    
    <div class="entry-wrapper">
      <header class="entry-header">
        <ul class="entry-tags">
          <li><a href="http://localhost:4000/tags/#erlang" title="Pages tagged erlang">erlang</a></li>
        </ul>
        
          <h1 class="entry-title">ruby</h1>
        
      </header>
      <footer class="entry-meta">
        
        
        <span class="author vcard">By <span class="fn">Ulysses</span></span>
        <span class="entry-date date published"><time datetime="2016-03-23T00:00:00+08:00"><i class="fa fa-calendar-o"></i> March 23, 2016</time></span>
        
        
        
        
      </footer>
      <div class="entry-content">
        <h1 id="ruby">ruby</h1>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">def</span> <span class="nf">watch_for</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">pattern</span><span class="p">)</span>
  <span class="n">f</span> <span class="o">=</span> <span class="n">File</span><span class="o">.</span><span class="nb">open</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span><span class="s">"r"</span><span class="p">)</span>
  <span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="n">IO</span><span class="p">::</span><span class="n">SEEK_END</span><span class="p">)</span>
  <span class="k">while</span> <span class="n">true</span> <span class="n">do</span>
    <span class="n">select</span><span class="p">([</span><span class="n">f</span><span class="p">])</span>
    <span class="n">line</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">gets</span>
    <span class="n">puts</span> <span class="s">"Found it! #{line}"</span> <span class="k">if</span> <span class="n">line</span><span class="o">=~</span><span class="n">pattern</span>
  <span class="n">end</span>
<span class="n">end</span>

<span class="n">watch_for</span><span class="p">(</span><span class="s">"g.txt"</span><span class="p">,</span><span class="o">/</span><span class="n">ERROR</span><span class="o">/</span><span class="p">)</span></code></pre></figure>

<p>Note: select always returns immediately when used on a file stream: You can always read EOF from that file stream, so your ruby process ends up spinning while it waits for the file to update. Different operating systems tend to offer different tools for waiting on files, Linux has inotify and OS X has fsevents - there are convenient ruby gems that wrap them, too.</p>


        
      </div><!-- /.entry-content -->
    </div><!-- /.entry-wrapper -->
    <nav class="pagination" role="navigation">
      
        <a href="http://localhost:4000/erlang/update-erlang/" class="btn" title="erlang">Previous</a>
      
      
        <a href="http://localhost:4000/closure/" class="btn" title="Closure">Next</a>
      
    </nav><!-- /.pagination -->
  </article>
</div><!-- /#main -->

<div class="footer-wrapper">
  <footer role="contentinfo" class="entry-wrapper">
    

<span>&copy; 2018 Ulysses. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</span>
<div class="social-icons">
	<a href="https://github.com/ulysseswolf" title="Ulysses on Github" target="_blank"><i class="fa fa-github-square fa-2x"></i></a>

</div><!-- /.social-icons -->

  </footer>
</div><!-- /.footer-wrapper -->

<script type="text/javascript">
  var BASE_URL = 'http://localhost:4000';
</script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="http://localhost:4000/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="http://localhost:4000/assets/js/scripts.min.js"></script>




</body>
</html>
