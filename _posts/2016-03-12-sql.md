---
layout: post
title: "SQL"
description: ""
categories:    
- sql
tags: [sql]
---
{{ page.title }}
================

## mysql LIKE multiple values 
{% highlight python %}
SELECT * from fiberbox where field REGEXP '1740|1938|1940';

## insert or update
Use INSERT ... ON DUPLICATE KEY UPDATE

ALTER table ADD UNIQUE (column)
INSERT INTO table (id, name, age) VALUES(1, "A", 19) ON DUPLICATE KEY UPDATE    
name="A", age=19

You can automatically convert an invalid date to the valid equivalent like this:

SELECT '2008-02-31' + INTERVAL 0 DAY;
# 2008-03-02

This lets you avoid storing invalid dates without bothering the user and without having to manually program a fix into your app. I suppose in >=5.0.2, you'd have to enable ALLOW_INVALID_DATES to avoid having it converted to '0000-00-00'. This also works with DATETIMEs.

if you add 0 month to an invalid date, you could get last day of the month, for example:   

SELECT '2008-02-31' + INTERVAL 0 MONTH;
# 2008-02-29

It works as
SELECT LAST_DAY('2008-02-31');
# 2008-02-29
{% endhighlight %}
